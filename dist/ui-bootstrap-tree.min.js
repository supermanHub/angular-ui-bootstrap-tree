"use strict";angular.module("ui.bootstrap.tree",[]).run(["$templateCache",function(a){a.put("uibTreeItemTemplate.html",'<span><i ng-class="getUibTreeNodeIcon(tree)" ng-click="toggleUibTreeNodeStatus(tree)"></i>&nbsp;<lable ng-click="toggleUibTreeNodeSelect(tree)" ng-class="getUibTreeLabelClass(tree)">{{tree.label}}</lable>&nbsp;<i ng-if="getUibTreeSelectStatus(tree)" ng-class="getUibTreeSelectIcon(tree)"></i></span><ul ng-if="getUibTreeNodeStatus(tree)" class="uib-tree"><li ng-repeat="tree in tree.children" ng-include="\'uibTreeItemTemplate.html\'"></li></ul>')}]).service("uibTreeUtil",function(){var a=function(a){return!!a.selected&&(1==a.selected||"true"==a.selected)},b=function(a){return!!a.children&&!(a.children.length<=0)},c=function(a){a.expanded=!0,b(a)&&angular.forEach(a.children,function(a){c(a)})},d=function(a,c,e){if(a.expanded=!0,e++,b(a))for(var f=0;f<a.children.length&&e<c;f++)d(a.children[f],c,e)},e=function(a){a.expanded=!1,b(a)&&angular.forEach(a.children,function(a){e(a)})},f=function(c){for(var d=0;d<c.length;d++){var e=c[d];if(a(e))b(e)&&f(e.children);else{if(c.splice(d,1),b(e))for(var g=e.children.length;g>0;g--)c.splice(d,0,e.children[g-1]);d--}}};return{expandAll:function(a){console.log("expandAll"),angular.isDefined(a)&&angular.forEach(a,function(a){c(a)})},expandByLevel:function(a,b){angular.isDefined(a)&&b>0&&angular.forEach(a,function(a){d(a,b,0)})},collapseAll:function(a){angular.isDefined(a)&&angular.forEach(a,function(a){e(a)})},getSelectedTreeModel:function(c){for(var d=angular.copy(c),e=0;e<d.length;e++){var g=d[e];if(a(g))b(g)&&f(g.children);else{if(d.splice(e,1),b(g))for(var h=g.children.length;h>0;h--)d.splice(e,0,g.children[h-1]);e--}}return d}}}).directive("uibTree",function(){return{restrict:"E",scope:{treeModel:"=",iconExpand:"@",iconCollapse:"@",iconLeaf:"@",iconSelect:"@",labelClass:"@",cascade:"@",reverse:"@",disableSelect:"@",onSelect:"&",onDeselect:"&"},template:'<ul class="uib-tree"><li ng-repeat="tree in treeModel" ng-include="\'uibTreeItemTemplate.html\'"></li></ul>',replace:!0,link:function(a,b,c){angular.isDefined(a.treeModel)?angular.isObject(a.treeModel)?angular.isArray(a.treeModel)||(a.treeModel=[a.treeModel]):console.error("Tree model must be an Object"):console.error("Tree model is required"),console.log(a);var d=function(a){return!!a.children&&!(a.children.length<=0)},e=function(a){return!!a.expanded&&(1==a.expanded||"true"==a.expanded)},f=function(a){return!!a.selected&&(1==a.selected||"true"==a.selected)},g=function(){return!(!angular.isDefined(a.cascade)||1!=a.cascade&&"true"!=a.cascade)},h=function(){return!(!angular.isDefined(a.reverse)||1!=a.reverse&&"true"!=a.reverse)},i=function(){return!g()&&!h()&&!(!angular.isDefined(a.disableSelect)||1!=a.disableSelect&&"true"!=a.disableSelect)},j=function(b){for(var c=null,e=function(a){if(d(a))if(-1!=a.children.indexOf(b))c=a;else for(var f=0;f<a.children.length&&(d(a.children[f])&&e(a.children[f]),null==c);f++);},f=0;f<a.treeModel.length&&(e(a.treeModel[f]),null==c);f++);return c},k=function(b){d(b)&&angular.forEach(b.children,function(a){f(a)||k(a)}),b.selected=!0,null!=b.onSelect?b.onSelect():null!=a.onSelect&&a.onSelect({model:b})},l=function(b){g()&&d(b)&&angular.forEach(b.children,function(a){f(a)||k(a)}),b.selected=!0,null!=b.onSelect?b.onSelect():null!=a.onSelect&&a.onSelect({model:b})},m=function(b){d(b)&&angular.forEach(b.children,function(a){f(a)&&m(a)}),b.selected=!1,null!=b.onDeselect?b.onDeselect():null!=a.onDeselect&&a.onDeselect({model:b})},n=function(b){var c=j(b);null!=c&&f(c)&&n(c),b.selected=!1,null!=b.onDeselect?b.onDeselect():null!=a.onDeselect&&a.onDeselect({model:b})},o=function(b){if(g()&&d(b)&&angular.forEach(b.children,function(a){f(a)&&m(a)}),h()){var c=j(b);null!=c&&f(c)&&n(c)}b.selected=!1,null!=b.onDeselect?b.onDeselect():null!=a.onDeselect&&a.onDeselect({model:b})};a.getUibTreeNodeStatus=function(a){return e(a)},a.getUibTreeNodeIcon=function(b){return d(b)?e(b)?angular.isDefined(b.iconCollapse)&&null!=b.iconCollapse&&""!=b.iconCollapse?b.iconCollapse:angular.isDefined(a.iconCollapse)&&null!=a.iconCollapse&&""!=a.iconCollapse?a.iconCollapse:"icon-minus glyphicon glyphicon-minus fa fa-minus text-info":angular.isDefined(b.iconExpand)&&null!=b.iconExpand&&""!=b.iconExpand?b.iconExpand:angular.isDefined(a.iconExpand)&&null!=a.iconExpand&&""!=a.iconExpand?a.iconExpand:"icon-plus glyphicon glyphicon-plus fa fa-plus text-info":angular.isDefined(b.iconLeaf)&&null!=b.iconLeaf&&""!=b.iconLeaf?b.iconLeaf:angular.isDefined(a.iconLeaf)&&null!=a.iconLeaf&&""!=a.iconLeaf?a.iconLeaf:"icon-file glyphicon glyphicon-file fa fa-file text-info"},a.getUibTreeSelectStatus=function(a){return!i()&&f(a)},a.getUibTreeSelectIcon=function(b){return angular.isDefined(b.iconSelect)&&null!=b.iconSelect&&""!=b.iconSelect?b.iconSelect:angular.isDefined(a.iconSelect)&&null!=a.iconSelect&&""!=a.iconSelect?a.iconSelect:"icon-check glyphicon glyphicon-ok fa fa-check text-info"},a.getUibTreeLabelClass=function(b){return angular.isDefined(b.labelClass)&&null!=b.labelClass&&""!=b.labelClass?b.labelClass:angular.isDefined(a.labelClass)&&null!=a.labelClass&&""!=a.labelClass?a.labelClass:"text-info"},a.toggleUibTreeNodeStatus=function(a){d(a)&&(e(a)?a.expanded=!1:a.expanded=!0)},a.toggleUibTreeNodeSelect=function(a){i()||(f(a)?o(a):l(a))}}}});